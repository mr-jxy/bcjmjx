<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />


    <title> - 北村精密机械报修系统</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> 
	{css href="__PUBLIC__/css/bootstrap.min.css,__PUBLIC__/css/font-awesome.min.css,__PUBLIC__/css/plugins/footable/footable.core.css" /}
	{css href="__PUBLIC__/css/animate.css,__PUBLIC__/css/style.css" /}
	{css href="__PUBLIC__/themes/default/css/umeditor.css,__PUBLIC__/control/css/zyUpload.css" /}
</head>

<body class="gray-bg">
<form method="post" action="{:url('Index/index')}" class="form-horizontal" enctype="multipart/form-data">
    <div class="wrapper wrapper-content animated fadeInRight">
    <!------------LOGO 开始------------>
    <style>
	
    	.logo{
			text-align:center;
			font-size:20px;
			color:#003F7E;
			
			}
			.logo .logoimg{
				width:60%;
				margin:10px auto;
				display:block}
			.logo p{
				margin-top:20px}
				.logo .ico{
					width:30%;
					margin:20px auto;
					display:block}
					.m-b {
    margin-bottom: 0px;
}.hr-line-dashed {
    border-top: 1px dashed #e7eaec;
    color: #FFF;
    background-color: #FFF;
    height: 1px;
    margin: 5px 0;
}
    </style>
        <div class="logo">
        	<img src="__PUBLIC__/img/logo.png" class="logoimg" />
        	<p>西安北村精密机械报修系统</p>
            <img src="__PUBLIC__/img/ico.png" class="ico" />
        </div>
    <!-----------LOGO  结束---------------->
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>报修地点</h5>
                        <div class="ibox-tools">
                        
                        </div>
                    </div>
                    		<div class="ibox-content">  
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">选择地区</label>
                                    <div class="col-sm-10">
                                        <select class="form-control m-b" id="rid" name="rid">
                                            <option value="0">请选择</option>
                                            {foreach $rlist as $vo} 
                                            <option value="{$vo.id}">{$vo.name}</option>
                                            {/foreach}
                                        </select>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                
                                <!--<div class="form-group">
                                    <label class="col-sm-2 control-label">选择具体市区</label>
                                    <div class="col-sm-10">
                                        <select class="form-control m-b" id="zid" name="zid">
                                            <option value="0">请选择</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>-->
                                
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">详细地址</label>
                                    <div class="col-sm-10">
                                        <input type="text" name="address" class="form-control" required>
										<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 请填写详细地址,方便上门服务</span>
                                    </div>
                                </div>
							</div>
                            </div>
							<div class="ibox float-e-margins">
                             <div class="ibox-title">
                        <h5>报修单位信息</h5>
                        <div class="ibox-tools">
                        
                        </div>
                    </div>
                            <div class="ibox-content">  
                            <div class="form-group">
                                <label class="col-sm-2 control-label">客户名称</label>
                                <div class="col-sm-10">
                                    <input type="text" name="username" class="form-control" required onkeyup="value=value.replace(/[^\u4E00-\u9FA5]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\u4E00-\u9FA5]/g,''))";>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">联系人</label>
                                <div class="col-sm-10">
                                    <input type="text" name="contacts" class="form-control" required onkeyup="value=value.replace(/[^\u4E00-\u9FA5]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\u4E00-\u9FA5]/g,''))";>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">联系电话</label>
                                <div class="col-sm-10">
                                    <input type="text" name="phone" class="form-control" required onkeyup="this.value=this.value.replace(/\D/g,'')"  onafterpaste="this.value=this.value.replace(/\D/g,'')";>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">邮箱</label>
                                <div class="col-sm-10">
                                    <input type="email" name="email" class="form-control" required>
                                </div>
                            </div>
						</div>
                        </div>
							 <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>报修设备信息</h5>
                        <div class="ibox-tools">
                        
                        </div>
                    </div><div class="ibox-content">  
							<div class="form-group">
                                <label class="col-sm-2 control-label">选择设备分类</label>
                                <div class="col-sm-10">
                                    <select class="form-control m-b" id="cid" name="cid">
										<option value="0">请选择</option>
										{foreach $cat as $vo} 
                                        <option value="{$vo.id}">{$vo.name}</option>
										{/foreach}
                                    </select>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">选择设备型号</label>
                                <div class="col-sm-10">
                                    <select class="form-control m-b" id="eq_id" name="eq_id">
										<option value="0">请选择</option>
                                    </select>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">设备型号</label>
                                <div class="col-sm-10">
                                    <input type="text" name="eq_info" class="form-control">
									<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 没有匹配型号时填写</span>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">设备编号</label>
                                <div class="col-sm-10">
                                    <input type="text" name="eq_num" class="form-control" required>
                                </div>
                            </div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
								<label class="col-sm-2 control-label">出厂日期</label>
								<div class="col-sm-10">
									<input id="hello" name="factory_date" class="laydate-icon form-control layer-date" required>
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">设备故障描述</label>
                                <div class="col-sm-10">
									<textarea name="info" style="width:100%; height:120px;" required></textarea>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
							
							<div class="form-group">
                                <label class="col-sm-2 control-label">图片上传</label>
								<div id="demo" class="demo"></div>    
                            </div>
                            <div class="hr-line-dashed"></div>
							
							
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-2">
                                    <button class="btn btn-primary" type="submit">保存内容</button>
                                    <button class="btn btn-white" type="submit">取消</button>
                                </div>
                            </div>
                      
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 全局js -->
	{js href="__PUBLIC__/js/jquery.min.js,__PUBLIC__/js/bootstrap.min.js" /}
    <!-- 自定义js -->

    <!-- iCheck -->
	{js href="__PUBLIC__/js/plugins/iCheck/icheck.min.js,__PUBLIC__/js/plugins/layer/laydate/laydate.js" /}
	<!-- simditor -->
	{js href="__PUBLIC__/third-party/template.min.js,__PUBLIC__/umeditor.config.js,__PUBLIC__/umeditor.min.js" /}
	<!-- jQuery Validation plugin javascript-->
	{js href="__PUBLIC__/js/plugins/validate/jquery.validate.min.js,__PUBLIC__/js/plugins/validate/messages_zh.min.js" /}
	<!--图片弹出层样式 必要样式--><!-- 引用核心层插件 -->
	{js href="__PUBLIC__/js/jquery-1.7.2.js,__PUBLIC__/core/zyFile.js" /}
	<!-- 引用控制层插件 --><!-- 引用初始化JS -->
	{js href="__PUBLIC__/control/js/zyUpload.js" /}
	<script>
		$(function(){
			// 初始化插件
			$("#demo").zyUpload({
				width            :   "92%",                 // 宽度
				height           :   "",                 // 宽度
				itemWidth        :   "120px",                 // 文件项的宽度
				itemHeight       :   "100px",                 // 文件项的高度
				//url              :   "/upload/UploadAction",  // 上传文件的路径
				url              :   "{:url('Index/imguplod')}",
				multiple         :   true,                    // 是否可以多个文件上传
				dragDrop         :   false,                    // 是否可以拖动上传文件
				del              :   true,                    // 是否可以删除文件
				finishDel        :   false,  				  // 是否在上传文件完成后删除预览
				/* 外部获得的回调接口 */
				onSelect: function(selectFiles, allFiles){    // 选择文件的回调方法  selectFile:当前选中的文件  allFiles:还没上传的全部文件
					console.info("当前选择了以下文件：");
					console.info(selectFiles);
				},
				onProgress: function(file, loaded, total){    // 正在上传的进度的回调方法
					console.info("当前正在上传此文件：");
					console.info(file.name);
					console.info("进度等信息如下：");
					console.info(loaded);
					console.info(total);
				},   
				onDelete: function(file, files){              // 删除一个文件的回调方法 file:当前删除的文件  files:删除之后的文件
					console.info("当前删除了此文件：");
					console.info(file.name);
				},
				onSuccess: function(file, response){          // 文件上传成功的回调方法
					console.info("此文件上传成功：");
					console.info(file.name);
				},
				onFailure: function(file, response){          // 文件上传失败的回调方法
					console.info("此文件上传失败：");
					console.info(file.name);
				},
				onComplete: function(response){           	  // 上传完成的回调方法
					console.info("文件上传完成");
					console.info(response);
				}
			});
			
		});
	</script>	
	<script type="text/javascript">
		 $('#cid').change(function(){
			 var checkValue=$("#cid").val();
			 $.ajax({
			 	type: 'GET',
				url: "{:url('Index/ld')}",
				data: {cid:checkValue},
				dataType: "json",
				success: function(data){
					$("#eq_id").empty();
					if(data[0]){
						$.each(data,function(key,item){
							$("#eq_id").append("<option value='"+item.id+"'>"+item.name+"</option>");
						})
					}else{						
						$("#eq_id").append("<option value='0'>请选择</option>");
					}	
				},
			 });	
		 })
		 
		 /*$('#rid').change(function(){
			 var checkValue=$("#rid").val();
			 $.ajax({
			 	type: 'GET',
				url: "{:url('Index/rld')}",
				data: {fid:checkValue},
				dataType: "json",
				success: function(data){
					$("#zid").empty();
					if(data[0]){					
						$.each(data,function(key,item){
							$("#zid").append("<option value='"+item.id+"'>"+item.name+"</option>");
						})
					}else{
						$("#zid").append("<option value='0'>请选择</option>");
					}	
				},
			 });	
		 })*/
	</script>
    <script>
        $(document).ready(function () {
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-green',
                radioClass: 'iradio_square-green',
            });
        });
		//外部js调用
        laydate({
            elem: '#hello', //目标元素。由于laydate.js封装了一个轻量级的选择器引擎，因此elem还允许你传入class、tag但必须按照这种方式 '#id .class'
            event: 'focus' //响应事件。如果没有传入event，则按照默认的click
        });

        //日期范围限制
        var start = {
            elem: '#start',
            format: 'YYYY/MM/DD hh:mm:ss',
            min: laydate.now(), //设定最小日期为当前日期
            max: '2099-06-16 23:59:59', //最大日期
            istime: true,
            istoday: false,
            choose: function (datas) {
                end.min = datas; //开始日选好后，重置结束日的最小日期
                end.start = datas //将结束日的初始值设定为开始日
            }
        };
        var end = {
            elem: '#end',
            format: 'YYYY/MM/DD hh:mm:ss',
            min: laydate.now(),
            max: '2099-06-16 23:59:59',
            istime: true,
            istoday: false,
            choose: function (datas) {
                start.max = datas; //结束日选好后，重置开始日的最大日期
            }
        };
        laydate(start);
        laydate(end);
    </script>

    
    
  </form>
</body>

</html>
